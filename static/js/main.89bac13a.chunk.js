(this.webpackJsonptodo=this.webpackJsonptodo||[]).push([[0],{68:function(e,t,n){},69:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},92:function(e,t,n){},93:function(e,t,n){},94:function(e,t,n){},95:function(e,t,n){},96:function(e,t,n){"use strict";n.r(t);var c=n(5),r=n.n(c),i=n(61),a=n.n(i),s=n(12),o=(n(68),n(69),n(11)),u=function(){return Object(o.jsx)("header",{className:"header",children:Object(o.jsx)("h1",{children:"Quiz app"})})},j=n(18),l=(n(71),function(e){var t=e.onClick,n=e.children;return Object(o.jsx)("button",{className:"game-button",onClick:t,children:n})}),b=(n(72),n(100)),h=n(98),d=n(99),O=function(e){var t=e.children,n=e.className;return Object(o.jsx)(h.a.section,{className:n,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:t},Object(d.a)())},f=function(e){var t=e.question,n=e.handleGoodAnswer,c=e.handleBadAnswer;return Object(o.jsx)(b.a,{initial:!0,exitBeforeEnter:!0,children:Object(o.jsxs)(O,{className:"question",children:[Object(o.jsx)("p",{children:t.question}),t.all_answers.map((function(e){return Object(o.jsx)(l,{onClick:function(r){return function(e,r){return r===t.correct_answer?n(e):c()}(r,e.answer)},children:e.answer},e.uuid)}))]})})},x=function(e){return(new DOMParser).parseFromString(e,"text/html").documentElement.textContent},p=function(e){return[].concat(Object(j.a)(e.incorrect_answers),[e.correct_answer])},m=function(e){return e.map((function(e){return x(e)}))},g=function(e){return Object(j.a)(e).sort((function(){return.5-Math.random()}))},w=function(e){return e.map((function(e){return{uuid:Object(d.a)(),answer:e}}))},v=(n(73),n(62)),k=n.n(v),C=n(31),y=function(){return Object(o.jsx)(C.b,{to:"/quiz",className:"link",children:Object(o.jsx)(l,{children:"Menu"})})},S=n(0),q=n.n(S),N=n(2),z=n(63),E=Object(z.a)({apiKey:"AIzaSyCk7HwdLJRzO5qbUIPE-K7nHTdI4ngFXPU",authDomain:"quiz-app-auth-d2fa3.firebaseapp.com",projectId:"quiz-app-auth-d2fa3",storageBucket:"quiz-app-auth-d2fa3.appspot.com",messagingSenderId:"951901024436",appId:"1:951901024436:web:5013594182f68c9f5a27e1"}),A=n(30),M=Object(A.d)(E),I=function(e){return Object(A.e)(Object(A.b)(M,"highscores",e),{scores:[]})},P=function(){var e=Object(N.a)(q.a.mark((function e(t,n){var c,r,i,a;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(A.b)(M,"highscores",t),r=new Date,i=r.getFullYear()+"-"+(r.getMonth()+1)+"-"+r.getDate(),a=r.getHours()+":"+r.getMinutes(),e.next=6,Object(A.f)(c,{scores:Object(A.a)("".concat(i," ").concat(a," Points: ").concat(n))});case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),_=function(){var e=Object(N.a)(q.a.mark((function e(t){var n,c;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(A.b)(M,"highscores",t),e.next=3,Object(A.c)(n);case 3:if(!(c=e.sent).exists()){e.next=8;break}return e.abrupt("return",c.data());case 8:return e.next=10,I(t);case 10:return e.next=12,Object(A.c)(n);case 12:return e.abrupt("return",c.data());case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=n(41),F=new B.a,H=Object(B.b)(),D=function(){return Object(o.jsx)(l,{onClick:function(){Object(B.c)(H,F).catch((function(e){console.log(e)}))},children:"Sign In with Google"})},G=function(){return H.currentUser&&Object(o.jsx)(l,{onClick:function(){Object(B.d)(H).then((function(){})).catch((function(e){console.log(e)}))},children:"Sign Out"})},J=Object(c.createContext)(void 0),L=function(e){var t=e.children,n=Object(c.useState)(null),r=Object(s.a)(n,2),i=r[0],a=r[1],u={user:i};return Object(c.useEffect)((function(){return H.onAuthStateChanged(a)}),[]),Object(o.jsx)(J.Provider,{value:u,children:t})},U=function(){var e=Object(c.useContext)(J);if(void 0===e)throw new Error("useFirebaseAuth must be used within a FirebaseAuthProvider");return e.user},Y=function(e){var t=e.handleWinModalShow,n=e.handleLoseModalShow,r=Object(c.useState)(!1),i=Object(s.a)(r,2),a=i[0],u=i[1],b=Object(c.useState)([]),h=Object(s.a)(b,2),d=h[0],O=h[1],v=Object(c.useState)(0),C=Object(s.a)(v,2),S=C[0],q=C[1],N=U(),z=function(e){return q(e)},E=function(e){return O(e)};Object(c.useEffect)((function(){!0===a&&k.a.get("https://opentdb.com/api.php?amount=20").then((function(e){var t=e.data.results;t.forEach((function(e){e.question=x(e.question),e.correct_answer=x(e.correct_answer),e.all_answers=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduce((function(e,t){return t(e)}),e)}}(p,m,g,w)(e)})),E(t)})).catch((function(e){return console.log(e)}))}),[a]),Object(c.useEffect)((function(){20===S&&(z(0),t())}),[S,t]);return Object(o.jsxs)("section",{className:"game",children:[Object(o.jsx)(y,{}),d.length?Object(o.jsxs)("div",{children:[Object(o.jsxs)("h4",{className:"game-points",children:["Points: ",S]}),Object(o.jsx)(f,{question:d[d.length-1],handleGoodAnswer:function(e){var t=Object(j.a)(d);t.pop(),E(t),z(S+1)},handleBadAnswer:function(){n(),_(N.email).then((function(e){P(N.email,S)})),z(0),E([]),u(!1)}})]}):Object(o.jsx)(l,{onClick:function(){return u(!0)},children:"New game"})]})},K=(n(92),function(e){var t=e.children,n=e.onClick;return Object(o.jsx)(h.a.div,{className:"backdrop",onClick:n,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:t})}),Q=(n(93),{hidden:{y:"-100vh",opacity:0},visible:{y:0,opacity:1,transition:{duration:.5,type:"string",damping:25,stiffness:500}},exit:{y:"100vh",opacity:0}}),W=function(e){var t=e.handleClose,n=e.text;return Object(o.jsx)(K,{onClick:t,children:Object(o.jsxs)(h.a.div,{onClick:function(e){return e.stopPropagation()},className:"modal orange-gradient",variants:Q,initial:"hidden",animate:"visible",exit:"exit",children:[Object(o.jsx)("p",{children:n}),Object(o.jsx)(l,{style:{backgroundColor:"red !important"},onClick:t,children:"Close"})]})})},R=n(13),T=(n(94),function(){var e=U(),t=Object(c.useState)([]),n=Object(s.a)(t,2),r=n[0],i=n[1];return Object(c.useEffect)((function(){_(e.email).then((function(e){return i(e.scores.slice(-5).reverse())}))}),[]),Object(o.jsxs)("main",{className:"highscores",children:[Object(o.jsx)(y,{}),Object(o.jsx)("h2",{children:"Highscores"}),r.map((function(e){return Object(o.jsx)("p",{children:e},Object(d.a)())}))]})}),X=(n(95),function(){var e=U();return Object(o.jsxs)("section",{className:"menu",children:[e?Object(o.jsx)(G,{}):Object(o.jsx)(D,{}),Object(o.jsx)(C.b,{to:"/quiz/game",className:"link",children:Object(o.jsx)(l,{children:"Game"})}),e&&Object(o.jsx)(C.b,{to:"/quiz/highscores",className:"link",children:Object(o.jsx)(l,{children:"Highscores"})})]})}),V=function(){document.title="Quiz | pszocik.github.io";var e=U(),t=Object(c.useState)(!1),n=Object(s.a)(t,2),r=n[0],i=n[1],a=Object(c.useState)(!1),j=Object(s.a)(a,2),l=j[0],h=j[1];return Object(o.jsxs)("main",{className:"App",children:[Object(o.jsx)(u,{}),Object(o.jsxs)(R.d,{children:[Object(o.jsx)(R.b,{exact:!0,path:"/quiz",element:Object(o.jsx)(O,{children:Object(o.jsx)(X,{})})}),Object(o.jsx)(R.b,{path:"/quiz/game",element:Object(o.jsx)(O,{children:Object(o.jsx)(Y,{handleWinModalShow:function(){return h(!0)},handleLoseModalShow:function(){return i(!0)}})})}),Object(o.jsx)(R.b,{path:"/quiz/highscores",element:Object(o.jsx)(O,{children:e?Object(o.jsx)(T,{}):Object(o.jsx)(R.a,{to:"/"})})})]}),Object(o.jsxs)(b.a,{initial:!1,exitBeforeEnter:!0,children:[r&&Object(o.jsx)(W,{handleClose:function(){return i(!1)},text:"You lost!"}),l&&Object(o.jsx)(W,{handleClose:function(){return h(!1)},text:"Congratulations! You won!"})]})]})};a.a.render(Object(o.jsxs)(C.a,{children:[Object(o.jsxs)(L,{children:[Object(o.jsx)(r.a.StrictMode,{children:Object(o.jsx)(V,{})}),","]}),","]}),document.getElementById("root"))}},[[96,1,2]]]);
//# sourceMappingURL=main.89bac13a.chunk.js.map