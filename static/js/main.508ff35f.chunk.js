(this.webpackJsonptodo=this.webpackJsonptodo||[]).push([[0],{68:function(e,t,n){},69:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},92:function(e,t,n){},93:function(e,t,n){},94:function(e,t,n){},95:function(e,t,n){},96:function(e,t,n){},97:function(e,t,n){"use strict";n.r(t);var c=n(6),r=n.n(c),i=n(61),a=n.n(i),s=n(12),o=(n(68),n(69),n(9)),u=function(){return Object(o.jsx)("header",{className:"header",children:Object(o.jsx)("h1",{children:"Quiz app"})})},j=n(18),l=(n(71),function(e){var t=e.onClick,n=e.children;return Object(o.jsx)("button",{className:"game-button",onClick:t,children:n})}),b=(n(72),n(100)),h=n(101),d=n(99),O=function(e){var t=e.children,n=e.className;return Object(o.jsx)(d.a.section,{className:n,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},children:t})},f=function(e){var t=e.question,n=e.handleGoodAnswer,c=e.handleBadAnswer;return Object(o.jsx)(h.a,{exitBeforeEnter:!0,children:Object(o.jsxs)(O,{className:"question",children:[Object(o.jsx)("p",{children:t.question}),t.all_answers.map((function(e){return Object(o.jsx)(l,{onClick:function(r){return function(e,r){return r===t.correct_answer?n(e):c()}(r,e.answer)},children:e.answer},e.uuid)}))]},Object(b.a)())})},x=function(e){return(new DOMParser).parseFromString(e,"text/html").documentElement.textContent},p=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduce((function(e,t){return t(e)}),e)}}((function(e){return[].concat(Object(j.a)(e.incorrect_answers),[e.correct_answer])}),(function(e){return e.map((function(e){return x(e)}))}),(function(e){return Object(j.a)(e).sort((function(){return.5-Math.random()}))}),(function(e){return e.map((function(e){return{uuid:Object(b.a)(),answer:e}}))})),m=(n(73),n(62)),g=n.n(m),v=n(31),w=function(){return Object(o.jsx)(v.b,{to:"/quiz",className:"link",children:Object(o.jsx)(l,{children:"Menu"})})},k=n(0),y=n.n(k),C=n(2),q=n(63),N=Object(q.a)({apiKey:"AIzaSyCk7HwdLJRzO5qbUIPE-K7nHTdI4ngFXPU",authDomain:"quiz-app-auth-d2fa3.firebaseapp.com",projectId:"quiz-app-auth-d2fa3",storageBucket:"quiz-app-auth-d2fa3.appspot.com",messagingSenderId:"951901024436",appId:"1:951901024436:web:5013594182f68c9f5a27e1"}),z=n(30),S=Object(z.d)(N),_=function(e){var t=Object(z.b)(S,"highscores",e);Object(z.e)(t,{scores:[]}).then((function(){return console.log("Document created successfully.")})).catch((function(e){return console.log(e)}))},E=function(){var e=Object(C.a)(y.a.mark((function e(t){var n,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(z.b)(S,"highscores",t),e.next=3,Object(z.c)(n);case 3:if(!0===(c=e.sent).exists()){e.next=10;break}return e.next=7,_(t);case 7:return e.next=9,Object(z.c)(n);case 9:c=e.sent;case 10:return e.abrupt("return",c.data());case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=n(41),I=new A.a,M=Object(A.b)(),P=function(){return Object(o.jsx)(l,{onClick:function(){Object(A.c)(M,I).catch((function(e){console.log(e)}))},children:"Sign In with Google"})},B=function(){return M.currentUser&&Object(o.jsx)(l,{onClick:function(){Object(A.d)(M).then((function(){})).catch((function(e){console.log(e)}))},children:"Sign Out"})},H=Object(c.createContext)(void 0),D=function(e){var t=e.children,n=Object(c.useState)(null),r=Object(s.a)(n,2),i=r[0],a=r[1],u={user:i};return Object(c.useEffect)((function(){return M.onAuthStateChanged(a)}),[]),Object(o.jsx)(H.Provider,{value:u,children:t})},F=function(){var e=Object(c.useContext)(H);if(void 0===e)throw new Error("useFirebaseAuth must be used within a FirebaseAuthProvider");return e.user},G=(n(92),function(e){var t=e.completed,n={width:"".concat(t,"%")};return Object(o.jsx)("div",{className:"progress-bar__container",children:Object(o.jsx)("div",{style:n,className:"progress-bar__filler",children:Object(o.jsx)("span",{className:"progress-bar__label",children:"".concat(t,"%")})})})}),J=function(e){var t=e.handleModalShow,n=Object(c.useState)(!1),r=Object(s.a)(n,2),i=r[0],a=r[1],u=Object(c.useState)([]),b=Object(s.a)(u,2),h=b[0],d=b[1],O=Object(c.useState)(0),m=Object(s.a)(O,2),v=m[0],w=m[1],k=F(),y=function(e){return w(e)},C=function(e){return d(e)};Object(c.useEffect)((function(){!1!==i&&g.a.get("https://opentdb.com/api.php?amount=20").then((function(e){var t=e.data.results;t.forEach((function(e){e.question=x(e.question),e.correct_answer=x(e.correct_answer),e.all_answers=p(e)})),C(t)})).catch((function(e){return console.log(e)}))}),[i]),Object(c.useEffect)((function(){v<20||(y(0),t("You won!"))}),[v,t]);return Object(o.jsx)("section",{children:h.length?Object(o.jsxs)("div",{className:"game-flex",children:[Object(o.jsx)(f,{question:h[h.length-1],handleGoodAnswer:function(e){var t=Object(j.a)(h);t.pop(),C(t),y(v+1)},handleBadAnswer:function(){t("You lost!"),k&&E(k.uid).then((function(e){!function(e,t){var n=Object(z.b)(S,"highscores",e),c=new Date,r=c.getFullYear()+"-"+(c.getMonth()+1)+"-"+c.getDate(),i=c.getHours()+":"+c.getMinutes();Object(z.f)(n,{scores:Object(z.a)("".concat(r," ").concat(i," Points: ").concat(t))}).then((function(){return console.log("Highscores updated successfully!")})).catch((function(e){return console.log(e)}))}(k.uid,v)})),y(0),C([]),a(!1)}}),Object(o.jsx)(G,{completed:5*v})]}):Object(o.jsx)(l,{onClick:function(){return a(!0)},children:"New game"})})},U=(n(93),function(e){var t=e.children,n=e.onClick;return Object(o.jsx)(d.a.div,{className:"backdrop",onClick:n,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:t})}),Y=(n(94),{hidden:{y:"-100vh",opacity:0},visible:{y:0,opacity:1,transition:{duration:.5,type:"string",damping:25,stiffness:500}},exit:{y:"100vh",opacity:0}}),K=function(e){var t=e.handleClose,n=e.text;return Object(o.jsx)(U,{onClick:t,children:Object(o.jsxs)(d.a.div,{onClick:function(e){return e.stopPropagation()},className:"modal purple-gradient",variants:Y,initial:"hidden",animate:"visible",exit:"exit",children:[Object(o.jsx)("p",{children:n}),Object(o.jsx)(l,{style:{backgroundColor:"red !important"},onClick:t,children:"Close"})]})})},Q=n(13),L=(n(95),function(){var e=F(),t=Object(c.useState)([]),n=Object(s.a)(t,2),r=n[0],i=n[1];return Object(c.useEffect)((function(){E(e.uid).then((function(e){i(e.scores.slice(-5).reverse())}))}),[]),Object(o.jsxs)("main",{className:"highscores",children:[Object(o.jsx)("h2",{children:"Highscores"}),Object(o.jsx)(O,{children:r.map((function(e){return Object(o.jsx)("p",{children:e},Object(b.a)())}))},Object(b.a)())]})}),R=(n(96),function(){var e=F();return Object(o.jsxs)("section",{className:"menu",children:[e?Object(o.jsx)(B,{}):Object(o.jsx)(P,{}),Object(o.jsx)(v.b,{to:"/quiz/game",className:"link",children:Object(o.jsx)(l,{children:"Game"})}),e&&Object(o.jsx)(v.b,{to:"/quiz/highscores",className:"link",children:Object(o.jsx)(l,{children:"Highscores"})})]})}),T=function(){document.title="Quiz | pszocik.github.io";var e=F(),t=Object(c.useState)({show:!1,text:""}),n=Object(s.a)(t,2),r=n[0],i=n[1],a=Object(Q.f)();return Object(o.jsxs)("main",{className:"App",children:[Object(o.jsx)(u,{}),"/quiz/"!==a.pathname&&"/quiz"!==a.pathname&&Object(o.jsx)(O,{children:Object(o.jsx)(w,{})},Object(b.a)()),Object(o.jsxs)(Q.d,{children:[Object(o.jsx)(Q.b,{exact:!0,path:"/quiz/",element:Object(o.jsx)(O,{children:Object(o.jsx)(R,{})},Object(b.a)())}),Object(o.jsx)(Q.b,{path:"/quiz/game",element:Object(o.jsx)(O,{children:Object(o.jsx)(J,{handleModalShow:function(e){return i({show:!0,text:e})}})},Object(b.a)())}),Object(o.jsx)(Q.b,{path:"/quiz/highscores",element:Object(o.jsx)(O,{children:e?Object(o.jsx)(L,{}):Object(o.jsx)(Q.a,{to:"/"})},Object(b.a)())})]}),Object(o.jsx)(h.a,{initial:!1,exitBeforeEnter:!0,children:r.show&&Object(o.jsx)(K,{handleClose:function(){return i({show:!1,text:""})},text:r.text})})]})};a.a.render(Object(o.jsxs)(v.a,{children:[Object(o.jsxs)(D,{children:[Object(o.jsx)(r.a.StrictMode,{children:Object(o.jsx)(T,{})}),","]}),","]}),document.getElementById("root"))}},[[97,1,2]]]);
//# sourceMappingURL=main.508ff35f.chunk.js.map