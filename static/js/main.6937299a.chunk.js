(this.webpackJsonptodo=this.webpackJsonptodo||[]).push([[0],{68:function(e,t,n){},69:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},92:function(e,t,n){},93:function(e,t,n){},94:function(e,t,n){},95:function(e,t,n){},96:function(e,t,n){},97:function(e,t,n){"use strict";n.r(t);var c=n(5),r=n.n(c),i=n(61),a=n.n(i),s=n(12),o=(n(68),n(69),n(9)),u=function(){return Object(o.jsx)("header",{className:"header",children:Object(o.jsx)("h1",{children:"Quiz app"})})},j=n(18),l=(n(71),function(e){var t=e.onClick,n=e.children;return Object(o.jsx)("button",{className:"game-button",onClick:t,children:n})}),b=(n(72),n(100)),d=n(101),h=n(99),O=function(e){var t=e.children,n=e.className;return Object(o.jsx)(h.a.section,{className:n,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},children:t})},f=function(e){var t=e.question,n=e.handleGoodAnswer,c=e.handleBadAnswer;return Object(o.jsx)(d.a,{exitBeforeEnter:!0,children:Object(o.jsx)(O,{className:"question",children:Object(o.jsxs)("div",{children:[Object(o.jsx)("p",{children:t.question}),t.all_answers.map((function(e){return Object(o.jsx)(l,{onClick:function(r){return function(e,r){return r===t.correct_answer?n(e):c()}(r,e.answer)},children:e.answer},e.uuid)}))]})},Object(b.a)())})},x=function(e){return(new DOMParser).parseFromString(e,"text/html").documentElement.textContent},p=function(e){return[].concat(Object(j.a)(e.incorrect_answers),[e.correct_answer])},m=function(e){return e.map((function(e){return x(e)}))},g=function(e){return Object(j.a)(e).sort((function(){return.5-Math.random()}))},v=function(e){return e.map((function(e){return{uuid:Object(b.a)(),answer:e}}))},w=(n(73),n(62)),k=n.n(w),y=n(31),C=function(){return Object(o.jsx)(y.b,{to:"/quiz",className:"link",children:Object(o.jsx)(l,{children:"Menu"})})},q=n(0),N=n.n(q),S=n(2),z=n(63),_=Object(z.a)({apiKey:"AIzaSyCk7HwdLJRzO5qbUIPE-K7nHTdI4ngFXPU",authDomain:"quiz-app-auth-d2fa3.firebaseapp.com",projectId:"quiz-app-auth-d2fa3",storageBucket:"quiz-app-auth-d2fa3.appspot.com",messagingSenderId:"951901024436",appId:"1:951901024436:web:5013594182f68c9f5a27e1"}),E=n(30),A=Object(E.d)(_),M=function(e){var t=Object(E.b)(A,"highscores",e);Object(E.e)(t,{scores:[]}).then((function(){return console.log("Document created successfully.")})).catch((function(e){return console.log(e)}))},I=function(){var e=Object(S.a)(N.a.mark((function e(t){var n,c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(E.b)(A,"highscores",t),e.next=3,Object(E.c)(n);case 3:if(!0===(c=e.sent).exists()){e.next=10;break}return e.next=7,M(t);case 7:return e.next=9,Object(E.c)(n);case 9:c=e.sent;case 10:return e.abrupt("return",c.data());case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=n(41),B=new P.a,H=Object(P.b)(),D=function(){return Object(o.jsx)(l,{onClick:function(){Object(P.c)(H,B).catch((function(e){console.log(e)}))},children:"Sign In with Google"})},F=function(){return H.currentUser&&Object(o.jsx)(l,{onClick:function(){Object(P.d)(H).then((function(){})).catch((function(e){console.log(e)}))},children:"Sign Out"})},G=Object(c.createContext)(void 0),J=function(e){var t=e.children,n=Object(c.useState)(null),r=Object(s.a)(n,2),i=r[0],a=r[1],u={user:i};return Object(c.useEffect)((function(){return H.onAuthStateChanged(a)}),[]),Object(o.jsx)(G.Provider,{value:u,children:t})},L=function(){var e=Object(c.useContext)(G);if(void 0===e)throw new Error("useFirebaseAuth must be used within a FirebaseAuthProvider");return e.user},U=(n(92),function(e){var t=e.completed,n={width:"".concat(t,"%")};return Object(o.jsx)("div",{className:"progress-bar__container",children:Object(o.jsx)("div",{style:n,className:"progress-bar__filler",children:Object(o.jsx)("span",{className:"progress-bar__label",children:"".concat(t,"%")})})})}),Y=function(e){var t=e.handleWinModalShow,n=e.handleLoseModalShow,r=Object(c.useState)(!1),i=Object(s.a)(r,2),a=i[0],u=i[1],b=Object(c.useState)([]),d=Object(s.a)(b,2),h=d[0],O=d[1],w=Object(c.useState)(0),y=Object(s.a)(w,2),C=y[0],q=y[1],N=L(),S=function(e){return q(e)},z=function(e){return O(e)};Object(c.useEffect)((function(){!1!==a&&k.a.get("https://opentdb.com/api.php?amount=20").then((function(e){var t=e.data.results;t.forEach((function(e){e.question=x(e.question),e.correct_answer=x(e.correct_answer),e.all_answers=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduce((function(e,t){return t(e)}),e)}}(p,m,g,v)(e)})),z(t)})).catch((function(e){return console.log(e)}))}),[a]),Object(c.useEffect)((function(){C<20||(S(0),t())}),[C,t]);return Object(o.jsx)("section",{children:h.length?Object(o.jsxs)("div",{className:"game-flex",children:[Object(o.jsx)(f,{question:h[h.length-1],handleGoodAnswer:function(e){var t=Object(j.a)(h);t.pop(),z(t),S(C+1)},handleBadAnswer:function(){n(),N&&I(N.uid).then((function(e){!function(e,t){var n=Object(E.b)(A,"highscores",e),c=new Date,r=c.getFullYear()+"-"+(c.getMonth()+1)+"-"+c.getDate(),i=c.getHours()+":"+c.getMinutes();Object(E.f)(n,{scores:Object(E.a)("".concat(r," ").concat(i," Points: ").concat(t))}).then((function(){return console.log("Highscores updated successfully!")})).catch((function(e){return console.log(e)}))}(N.uid,C)})),S(0),z([]),u(!1)}}),Object(o.jsx)(U,{completed:5*C})]}):Object(o.jsx)(l,{onClick:function(){return u(!0)},children:"New game"})})},K=(n(93),function(e){var t=e.children,n=e.onClick;return Object(o.jsx)(h.a.div,{className:"backdrop",onClick:n,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:t})}),Q=(n(94),{hidden:{y:"-100vh",opacity:0},visible:{y:0,opacity:1,transition:{duration:.5,type:"string",damping:25,stiffness:500}},exit:{y:"100vh",opacity:0}}),W=function(e){var t=e.handleClose,n=e.text;return Object(o.jsx)(K,{onClick:t,children:Object(o.jsxs)(h.a.div,{onClick:function(e){return e.stopPropagation()},className:"modal purple-gradient",variants:Q,initial:"hidden",animate:"visible",exit:"exit",children:[Object(o.jsx)("p",{children:n}),Object(o.jsx)(l,{style:{backgroundColor:"red !important"},onClick:t,children:"Close"})]})})},R=n(13),T=(n(95),function(){var e=L(),t=Object(c.useState)([]),n=Object(s.a)(t,2),r=n[0],i=n[1];return Object(c.useEffect)((function(){I(e.uid).then((function(e){i(e.scores.slice(-5).reverse())}))}),[]),Object(o.jsxs)("main",{className:"highscores",children:[Object(o.jsx)("h2",{children:"Highscores"}),Object(o.jsx)(O,{children:r.map((function(e){return Object(o.jsx)("p",{children:e},Object(b.a)())}))},Object(b.a)())]})}),X=(n(96),function(){var e=L();return Object(o.jsxs)("section",{className:"menu",children:[e?Object(o.jsx)(F,{}):Object(o.jsx)(D,{}),Object(o.jsx)(y.b,{to:"/quiz/game",className:"link",children:Object(o.jsx)(l,{children:"Game"})}),e&&Object(o.jsx)(y.b,{to:"/quiz/highscores",className:"link",children:Object(o.jsx)(l,{children:"Highscores"})})]})}),V=function(){document.title="Quiz | pszocik.github.io";var e=L(),t=Object(c.useState)(!1),n=Object(s.a)(t,2),r=n[0],i=n[1],a=Object(c.useState)(!1),j=Object(s.a)(a,2),l=j[0],h=j[1],f=Object(R.f)();return Object(o.jsxs)("main",{className:"App",children:[Object(o.jsx)(u,{}),"/quiz/"!==f.pathname&&"/quiz"!==f.pathname&&Object(o.jsx)(O,{children:Object(o.jsx)(C,{})},Object(b.a)()),Object(o.jsxs)(R.d,{children:[Object(o.jsx)(R.b,{exact:!0,path:"/quiz",element:Object(o.jsx)(O,{children:Object(o.jsx)(X,{})},Object(b.a)())}),Object(o.jsx)(R.b,{path:"/quiz/game",element:Object(o.jsx)(O,{children:Object(o.jsx)(Y,{handleWinModalShow:function(){return h(!0)},handleLoseModalShow:function(){return i(!0)}})},Object(b.a)())}),Object(o.jsx)(R.b,{path:"/quiz/highscores",element:Object(o.jsx)(O,{children:e?Object(o.jsx)(T,{}):Object(o.jsx)(R.a,{to:"/"})},Object(b.a)())})]}),Object(o.jsxs)(d.a,{initial:!1,exitBeforeEnter:!0,children:[r&&Object(o.jsx)(W,{handleClose:function(){return i(!1)},text:"You lost!"}),l&&Object(o.jsx)(W,{handleClose:function(){return h(!1)},text:"Congratulations! You won!"})]})]})};a.a.render(Object(o.jsxs)(y.a,{children:[Object(o.jsxs)(J,{children:[Object(o.jsx)(r.a.StrictMode,{children:Object(o.jsx)(V,{})}),","]}),","]}),document.getElementById("root"))}},[[97,1,2]]]);
//# sourceMappingURL=main.6937299a.chunk.js.map